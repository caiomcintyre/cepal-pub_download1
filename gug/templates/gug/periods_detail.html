{% extends "gug/home.html" %}
{% load i18n %}
{% load static %}
{% load mathfilters %}
{% load bootstrap_pagination %}
{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}" />
<script type="text/javascript" src="/admin/jsi18n/"></script>
<script type="text/javascript" src="/static/admin/js/core.js"></script>
<script type="text/javascript" src="/static/admin/js/vendor/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.init.js"></script>
<script type="text/javascript" src="/static/admin/js/admin/RelatedObjectLookups.js"></script>
<script type="text/javascript" src="/static/admin/js/actions.min.js"></script>
<script type="text/javascript" src="/static/admin/js/urlify.js"></script>
<script type="text/javascript" src="/static/admin/js/prepopulate.min.js"></script>
<script type="text/javascript" src="/static/admin/js/vendor/xregexp/xregexp.min.js"></script>
{% endblock %}

{% if not is_popup %}
    {% block breadcrumbs %}
        <div class="breadcrumbs">
            <a href="{% url 'gug:index' %}">{% trans 'Home' %}</a>&rsaquo; <a href="{% url 'gug:periods' %}">{% trans 'Periods' %}</a>
            {% if app %}
                &rsaquo; <a href="{{ app.app_url }}">{% if app.name != app.app_label|capfirst|escape %}{{ app.name }}{% else %}{% trans app.app_label as app_label %}{{ app_label|capfirst|escape }}{% endif %}</a>
            {% endif %}
            &rsaquo; {{ object.title|capfirst }}
        </div>
    {% endblock %}
{% endif %}

{% block bodyclass %}{{ block.super }} dashboard jet change-form{% endblock %}


{% block content %}
<div id="content" class="flex">


<h2>Periods {{ period }}</h2>
<br class="clear" />

   <div class="results">
    <table id="result_list">
       <tbody>
        <tr>
          <td scope="col" class="column-id_dspace">
             <div class="text">Start Date</div>
             <div class="clear"></div>
          </td>
          <td scope="col" class="column-id_dspace">
             <div class="text">{{ period.start_date }}</div>
          </td>
        </tr>
        <tr>
          <td scope="col"  class=" column-id_dspace">
             <div class="text">End Date</div>
             <div class="clear"></div>

          </td>
          <td scope="col" class="column-id_dspace">
            <div class="text">{{ period.end_date }}</div>
          </td>

        </tr>
      </tbody>
    </table>
    </div>
    <br class="clear" />
    <div class="results">
      <table id="result_list">
        <thead>
          <tr>
            <th scope="col"  class="sortable column-id_dspace">
              <div class="text"><a href="?o=1">Service</a></div>
              <div class="clear"></div>
            </th>
              <th scope="col"  class="sortable column-title">
                 <div class="text"><a href="?o=2">View</a></div>
                 <div class="clear"></div>
              </th>
              <th scope="col"  class="sortable column-title">
                 <div class="text"><a href="?o=3">Records</a></div>
                 <div class="clear"></div>
              </th>
              <th scope="col"  class="sortable column-title">
                 <div class="text"><a href="?o=4">Downloads</a></div>
                 <div class="clear"></div>
              </th>
              </tr>
            </thead>

            <tbody>
              {% for gs in google_service %}
                <tr>
                  <td><a href="{% url "gug:stat_index_paginated" %}?period={{period.id}}&amp;gsid={{gs.id}}&amp;page=1&amp;pagesize=10">{{ gs }}</a></td>

                  <td>{{ gs.view_id }}</td>


                    {% for statistic in statistics %}
                      {% if gs.id == statistic.google_service %}
                      <td class="text-right">
                        {{ statistic.cuantity__count }}
                      </td>
                      <td class="text-right">
                        {{ statistic.cuantity__sum }}
                      </td>
                      {% endif %}
                    {% endfor%}

                </tr>
              {% endfor%}

          </tbody>
          <tfooter>
            <tr>
                <th colspan="1">Total</th>
                <th>{{ statistics|length }}</th>
                <th class="text-right">{{ resume.totalrecords }}</th>
                <th class="text-right">{{ resume.totalcuantity }}</th>

            </tr>
          </tfooter>
         </table>
</div>


{% endblock %}
